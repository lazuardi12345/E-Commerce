{"ast":null,"code":"// Ambil keranjang awal dari localStorage\nconst getInitialCart = () => {\n  try {\n    const stored = localStorage.getItem(\"cart\");\n    const cart = stored ? JSON.parse(stored) : [];\n    return Array.isArray(cart) ? cart : [];\n  } catch (err) {\n    console.error(\"Error parsing cart:\", err);\n    return [];\n  }\n};\n\n// Reducer cart\nconst handleCart = (state = getInitialCart(), action) => {\n  const {\n    payload,\n    type\n  } = action;\n  let updatedCart;\n  switch (type) {\n    case \"ADDITEM\":\n      const addLevel = payload.level || payload.level_id || \"default\";\n      const existing = state.find(item => item.id === payload.id && item.level === addLevel);\n      updatedCart = existing ? state.map(item => item.id === payload.id && item.level === addLevel ? {\n        ...item,\n        qty: item.qty + 1\n      } : item) : [...state, {\n        ...payload,\n        qty: 1,\n        level: addLevel\n      }];\n      break;\n    case \"DECREASEITEM\":\n      const decreaseLevel = payload.level || payload.level_id || \"default\";\n      updatedCart = state.map(item => item.id === payload.id && item.level === decreaseLevel ? {\n        ...item,\n        qty: item.qty - 1\n      } : item).filter(item => item.qty > 0);\n      break;\n    case \"DELITEM\":\n      const delLevel = payload.level || payload.level_id || \"default\";\n      updatedCart = state.filter(item => !(item.id === payload.id && item.level === delLevel));\n      break;\n    case \"CLEAR_CART\":\n      updatedCart = [];\n      break;\n    default:\n      return state;\n  }\n\n  // Simpan cart ke localStorage\n  localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  return updatedCart;\n};\nexport default handleCart;","map":{"version":3,"names":["getInitialCart","stored","localStorage","getItem","cart","JSON","parse","Array","isArray","err","console","error","handleCart","state","action","payload","type","updatedCart","addLevel","level","level_id","existing","find","item","id","map","qty","decreaseLevel","filter","delLevel","setItem","stringify"],"sources":["/Users/iyusyulius/Documents/Semester 7/Project TA/FE-Seblak/E-Commerce/src/redux/reducer/handleCart.js"],"sourcesContent":["// Ambil keranjang awal dari localStorage\nconst getInitialCart = () => {\n  try {\n    const stored = localStorage.getItem(\"cart\");\n    const cart = stored ? JSON.parse(stored) : [];\n    return Array.isArray(cart) ? cart : [];\n  } catch (err) {\n    console.error(\"Error parsing cart:\", err);\n    return [];\n  }\n};\n\n// Reducer cart\nconst handleCart = (state = getInitialCart(), action) => {\n  const { payload, type } = action;\n  let updatedCart;\n\n  switch (type) {\n    case \"ADDITEM\":\n      const addLevel = payload.level || payload.level_id || \"default\";\n\n      const existing = state.find(\n        (item) => item.id === payload.id && item.level === addLevel\n      );\n\n      updatedCart = existing\n        ? state.map((item) =>\n            item.id === payload.id && item.level === addLevel\n              ? { ...item, qty: item.qty + 1 }\n              : item\n          )\n        : [\n            ...state,\n            {\n              ...payload,\n              qty: 1,\n              level: addLevel,\n            },\n          ];\n      break;\n\n    case \"DECREASEITEM\":\n      const decreaseLevel = payload.level || payload.level_id || \"default\";\n\n      updatedCart = state\n        .map((item) =>\n          item.id === payload.id && item.level === decreaseLevel\n            ? { ...item, qty: item.qty - 1 }\n            : item\n        )\n        .filter((item) => item.qty > 0);\n      break;\n\n    case \"DELITEM\":\n      const delLevel = payload.level || payload.level_id || \"default\";\n\n      updatedCart = state.filter(\n        (item) => !(item.id === payload.id && item.level === delLevel)\n      );\n      break;\n\n    case \"CLEAR_CART\":\n      updatedCart = [];\n      break;\n\n    default:\n      return state;\n  }\n\n  // Simpan cart ke localStorage\n  localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  return updatedCart;\n};\n\nexport default handleCart;\n"],"mappings":"AAAA;AACA,MAAMA,cAAc,GAAGA,CAAA,KAAM;EAC3B,IAAI;IACF,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC3C,MAAMC,IAAI,GAAGH,MAAM,GAAGI,IAAI,CAACC,KAAK,CAACL,MAAM,CAAC,GAAG,EAAE;IAC7C,OAAOM,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE;EACxC,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;IACzC,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,MAAMG,UAAU,GAAGA,CAACC,KAAK,GAAGb,cAAc,CAAC,CAAC,EAAEc,MAAM,KAAK;EACvD,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGF,MAAM;EAChC,IAAIG,WAAW;EAEf,QAAQD,IAAI;IACV,KAAK,SAAS;MACZ,MAAME,QAAQ,GAAGH,OAAO,CAACI,KAAK,IAAIJ,OAAO,CAACK,QAAQ,IAAI,SAAS;MAE/D,MAAMC,QAAQ,GAAGR,KAAK,CAACS,IAAI,CACxBC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKT,OAAO,CAACS,EAAE,IAAID,IAAI,CAACJ,KAAK,KAAKD,QACrD,CAAC;MAEDD,WAAW,GAAGI,QAAQ,GAClBR,KAAK,CAACY,GAAG,CAAEF,IAAI,IACbA,IAAI,CAACC,EAAE,KAAKT,OAAO,CAACS,EAAE,IAAID,IAAI,CAACJ,KAAK,KAAKD,QAAQ,GAC7C;QAAE,GAAGK,IAAI;QAAEG,GAAG,EAAEH,IAAI,CAACG,GAAG,GAAG;MAAE,CAAC,GAC9BH,IACN,CAAC,GACD,CACE,GAAGV,KAAK,EACR;QACE,GAAGE,OAAO;QACVW,GAAG,EAAE,CAAC;QACNP,KAAK,EAAED;MACT,CAAC,CACF;MACL;IAEF,KAAK,cAAc;MACjB,MAAMS,aAAa,GAAGZ,OAAO,CAACI,KAAK,IAAIJ,OAAO,CAACK,QAAQ,IAAI,SAAS;MAEpEH,WAAW,GAAGJ,KAAK,CAChBY,GAAG,CAAEF,IAAI,IACRA,IAAI,CAACC,EAAE,KAAKT,OAAO,CAACS,EAAE,IAAID,IAAI,CAACJ,KAAK,KAAKQ,aAAa,GAClD;QAAE,GAAGJ,IAAI;QAAEG,GAAG,EAAEH,IAAI,CAACG,GAAG,GAAG;MAAE,CAAC,GAC9BH,IACN,CAAC,CACAK,MAAM,CAAEL,IAAI,IAAKA,IAAI,CAACG,GAAG,GAAG,CAAC,CAAC;MACjC;IAEF,KAAK,SAAS;MACZ,MAAMG,QAAQ,GAAGd,OAAO,CAACI,KAAK,IAAIJ,OAAO,CAACK,QAAQ,IAAI,SAAS;MAE/DH,WAAW,GAAGJ,KAAK,CAACe,MAAM,CACvBL,IAAI,IAAK,EAAEA,IAAI,CAACC,EAAE,KAAKT,OAAO,CAACS,EAAE,IAAID,IAAI,CAACJ,KAAK,KAAKU,QAAQ,CAC/D,CAAC;MACD;IAEF,KAAK,YAAY;MACfZ,WAAW,GAAG,EAAE;MAChB;IAEF;MACE,OAAOJ,KAAK;EAChB;;EAEA;EACAX,YAAY,CAAC4B,OAAO,CAAC,MAAM,EAAEzB,IAAI,CAAC0B,SAAS,CAACd,WAAW,CAAC,CAAC;EACzD,OAAOA,WAAW;AACpB,CAAC;AAED,eAAeL,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}